<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Invia richiesta – Discord Designer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/style.css">
</head>

<body>

<div class="stars"></div>

<div class="content">

  <header>
    <h1>Invia richiesta</h1>
    <p>Completa tutti i dettagli necessari</p>
  </header>

  <section class="form-section">
    <form class="request-box" id="contact-form">

      <input type="text" name="name" placeholder="Il tuo nome" required>
      <input type="email" name="email" placeholder="La tua email" required>

      <!-- PACK BLOCCATO -->
      <input type="text" id="packDisplay" readonly>
      <input type="hidden" id="packHidden" name="package">

      <select id="distance" name="distance" required>
        <option value="">Sei nella mia zona?</option>
        <option value="Locale">Locale (stessa città)</option>
        <option value="Lontano">Lontano</option>
      </select>

      <div id="local" class="hidden">
        <input type="text" name="payment_local" value="Contanti (di persona)" readonly>
      </div>

      <div id="remote" class="hidden">
        <select id="remotePay" name="payment_remote">
          <option value="">Metodo di pagamento</option>
          <option value="Bonifico / Carta">Bonifico / Carta</option>
          <option value="Gioco">Pagamento tramite gioco</option>
        </select>

        <div id="games" class="hidden">
          <select id="gameSelect" name="game">
            <option value="">Scegli il gioco</option>
            <option value="Roblox">Roblox</option>
            <option value="GTA Online">GTA Online</option>
            <option value="Fortnite">Fortnite</option>
          </select>

          <select id="roblox" name="roblox_type" class="hidden">
            <option value="Pet Simulator">Pet Simulator</option>
            <option value="Blox Fruits">Blox Fruits</option>
            <option value="Garden Tower Defense">Garden Tower Defense</option>
            <option value="Grow a Garden">Grow a Garden</option>
          </select>

          <select id="gta" name="gta_type" class="hidden">
            <option value="Scambio veicoli">Scambio veicoli</option>
            <option value="Colpi">Colpi</option>
          </select>

          <select id="fortnite" name="fortnite_type" class="hidden">
            <option value="Skin">Skin</option>
            <option value="Balletto">Balletto</option>
          </select>
        </div>
      </div>

      <textarea name="message" placeholder="Spiega tutto nel dettaglio..." required></textarea>

      <button type="submit">Invia richiesta</button>

      <p id="form-success" class="hidden" style="color:#22c55e;text-align:center;">
        ✅ Richiesta inviata! Verrai contattato presto.
      </p>

    </form>
  </section>

  <footer>© Discord Designer</footer>
</div>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script src="js/form.js"></script>

<script>
  const params = new URLSearchParams(window.location.search);
  const pack = params.get("pack");
  if (pack) {
    packDisplay.value = pack;
    packHidden.value = pack;
  }

  distance.onchange = () => {
    local.classList.add("hidden");
    remote.classList.add("hidden");
    games.classList.add("hidden");
    if (distance.value === "Locale") local.classList.remove("hidden");
    if (distance.value === "Lontano") remote.classList.remove("hidden");
  };

  remotePay.onchange = () => {
    games.classList.toggle("hidden", remotePay.value !== "Gioco");
  };

  gameSelect.onchange = () => {
    roblox.classList.add("hidden");
    gta.classList.add("hidden");
    fortnite.classList.add("hidden");
    if (gameSelect.value === "Roblox") roblox.classList.remove("hidden");
    if (gameSelect.value === "GTA Online") gta.classList.remove("hidden");
    if (gameSelect.value === "Fortnite") fortnite.classList.remove("hidden");
  };
</script>

</body>
</html>
